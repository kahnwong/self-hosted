kind: Deployment
name: cpubench-api
replicaCount: 1
containers:
  - name: cpubench-api
    repository: ghcr.io/kahnwong/cpu-bench
    tag: dc9925b
    port: 3000
    env:
      - name: LISTEN_ADDR
        value: ":3000"
    envFrom:
      - secretRef:
          name: cpubench-api
    volumeMounts:
      - name: data
        mountPath: /data
    livenessProbeScheme: tcp
volumes:
  - name: data
    hostPath:
      path: /opt/cpubench-api/data
service:
  port: 3000
  nodePort: 30080
imagePullSecrets:
  - name: ghcr-cfg
