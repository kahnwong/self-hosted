version: '3.3'

services:
  # https://docs.linuxserver.io/images/docker-jellyfin#nvidia
  # https://jellyfin.org/docs/general/networking/apache.html

  jellyfin:
    container_name: jellyfin
    image: linuxserver/jellyfin:version-10.7.6-1
    # runtime: nvidia
    devices:
      - /dev/dri:/dev/dri
    environment:
      PUID: 1000
      PGID: 1000
      TZ: Asia/Bangkok
      # - NVIDIA_VISIBLE_DEVICES=all
      # - UMASK_SET=<022> #optional
    volumes:
      - /opt/jellyfin/config:/config
      - /opt/jellyfin/shows:/data/tvshows
      - /opt/jellyfin/movies:/data/movies
      - /opt/jellyfin/videos:/data/videos
      - /opt/jellyfin/asmr:/data/asmr
      - /mnt/media:/data/media
      # - /opt/vc/lib:/opt/vc/lib #optional
    ports:
      - 6589:8096
      - 7359:7359/udp #optional
      - 1900:1900/udp #optional
    restart: always
    networks:
      - jellyfin

networks:
  jellyfin:
    driver: bridge
