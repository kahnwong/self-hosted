version: '3'

services:
  lychee_db:
    container_name: lychee_db
    image: mariadb:10
    environment:
      - MYSQL_ROOT_PASSWORD=rootpassword
      - MYSQL_DATABASE=lychee
      - MYSQL_USER=lychee
      - MYSQL_PASSWORD=password
    expose: 
      - 3306
    volumes:
      - /opt/lychee/db:/var/lib/mysql
    restart: unless-stopped

  lychee:
    image: lycheeorg/lychee
    container_name: lychee
    ports:
      - 90:80
    volumes:
      - /opt/lychee/conf:/conf
      - ./images:/uploads
      - /opt/lychee/sym:/sym
    environment:
      - PHP_TZ=Asia/Bangkok
      - DB_CONNECTION=mysql
      - DB_HOST=lychee_db
      - DB_PORT=3306
      - DB_DATABASE=lychee
      - DB_USERNAME=lychee
      - DB_PASSWORD=password
      - STARTUP_DELAY=30
    restart: unless-stopped
    depends_on:
      - lychee_db

# admin/adminpassword